<!DOCTYPE html>
<html>
<head>
    <title>Travel Blog</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link href="/favicon.ico" type="image/x-icon" rel="icon" />
    <link rel="stylesheet" href="/stylesheets/main.css">
</head>
<body>
    
    <nav class="navbar navbar-dark bg-dark navbar-expand-lg">
        <a href="/blogs" class="ga-header-logo" style="margin-right: 30px;">
            <svg class="logo-icon" style="height: 32px; width: 32px;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                    <style>
                    .st0 {
                        fill: url(#gradientone);
                    }
                    .st1 {
                        fill: #FFFFFF;
                    }
                    .st2 {
                        fill: url(#gradienttwo);
                    }
                    </style>
                    <g id="B_4_">
                    <g id="XMLID_462_">
                        <radialGradient id="gradientone" cx=".083" cy="0" r="44.988" gradientUnits="userSpaceOnUse">
                        <stop offset="0" stop-color="#F59839"></stop>
                        <stop offset="1" stop-color="#F38936"></stop>
                        </radialGradient>
                        <path id="XMLID_475_" class="st0" d="M32 29.3c0 1.5-1.2 2.7-2.7 2.7H2.7C1.2 32 0 30.8 0 29.3V2.7C0 1.2 1.2 0 2.7 0h26.7C30.8 0 32 1.2 32 2.7v26.6z"></path>
                        <g id="XMLID_464_">
                        <g id="XMLID_465_">
                            <path id="XMLID_466_" class="st1" d="M25.3 13.3H24c-.7 0-1.3-.6-1.3-1.3 0-3.7-3-6.7-6.7-6.7h-4c-3.7 0-6.7 3-6.7 6.7v8c0 3.7 3 6.7 6.7 6.7h8c3.7 0 6.7-3 6.7-6.7v-5.3c0-.8-.6-1.4-1.4-1.4zm-13.4-2.6h4.8c.7 0 1.3.6 1.3 1.3 0 .7-.6 1.3-1.3 1.3h-4.8c-.7 0-1.3-.6-1.3-1.3 0-.7.6-1.3 1.3-1.3zm8.2 10.6H12c-.7 0-1.3-.6-1.3-1.3 0-.7.6-1.3 1.3-1.3h8.1c.7 0 1.3.6 1.3 1.3 0 .7-.6 1.3-1.3 1.3z"></path>
                        </g>
                        </g>
                        <radialGradient id="gradienttwo" cx=".067" cy=".033" r="45.159" gradientUnits="userSpaceOnUse">
                        <stop offset="0" stop-color="#FFF" stop-opacity=".1"></stop>
                        <stop offset="1" stop-color="#FFF" stop-opacity="0"></stop>
                        </radialGradient>
                        <path id="XMLID_463_" class="st2" d="M32 29.3c0 1.5-1.2 2.7-2.7 2.7H2.7C1.2 32 0 30.8 0 29.3V2.7C0 1.2 1.2 0 2.7 0h26.7C30.8 0 32 1.2 32 2.7v26.6z"></path>
                    </g>
                    </g>
                </svg>
            </svg>
            <span style="display: inline-block; color: #fff; margin-left: 10px; font-size: 20px; font-weight: bold; padding-top: 1px;">
                Travel &nbsp;Blog
            </span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <form class="form-inline" action="/blogs/search/name" method="GET">
                    <div class="input-group">
                        <input type="text" name="search" class="form-control" placeholder="Input the blog name">
                        <div class="input-group-apend">
                            <button style="border-left-width: 0;border-top-left-radius: 0;border-bottom-left-radius: 0;" type="submit" class="btn btn-outline-secondary">Search</button>
                        </div>
                    </div>
                </form>
            </ul>
            <ul class="navbar-nav" style="padding-right: 10px;">
                <% if(!currentUser){ %>
                    <li class="nav-item active"><a class="nav-link" href="/login" style="padding: 3px"><button type="button" class="btn btn-outline-secondary">SIGN IN</button></a></li>
                <% } else { %>
                    <li class="nav-item active"><a class="nav-link" href="/logout" style="padding: 3px"><button type="button" class="btn btn-outline-secondary">SIGN OUT</button></a></li>
                <% } %>
            </ul>
        </div>
    </nav>
    <div class="container">
        <% if(error && error.length > 0){ %>
            <div class="alert alert-danger" role="alert">
                <%= error %>
            </div>
        <% } %>
        <% if(success && success.length > 0){ %>
            <div class="alert alert-success" role="alert">
                <%= success %>
            </div>
        <% } %>
    </div>

    <div class="container showBlog">
        <div class="thumbnail" style="padding:30px;margin-bottom: 40px;">
            <h3 style="padding-left:15px;">User Profile</h3>
            <div class="row">
                <div class="col-md-4" style="text-align: center; padding-top:70px;">
                    <div><img style="width: 200px;" class="img-user" src="<%= info.user.image %>"></div>
                    <p style="padding-top:20px; font-size: 20px; font-weight: bold;"><%= info.user.username %></p>
                </div>
                <div class="col-md-8">
                    <form>
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input disabled class="form-control" type="text" name="username" id="username" value="<%= info.user.username %>" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input class="form-control" type="password" name="password" id="password" value="********" required>
                        </div>
                        <div class="form-group">
                            <label for="password1">Confirm Password</label>
                            <input class="form-control" type="password" name="password1" id="password1" value="********" required>
                        </div>
                        <div class="form-group">
                            <label for="photo">Photo Url</label>
                            <input class="form-control" type="text" name="image" id="photo" value="<%= info.user.image %>" required>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-lg btn-primary btn-block">Edit Profile</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="thumbnail" style="padding:30px;margin-bottom: 40px;">
            <div class="row">
                <h3 class="col-md-9" style="padding-left:15px;">Unchecked Blogs</h3>
                <p class="col-md-3" class="user-blog-addbtn">
                    <a class="btn btn-primary btn-large" href="/blogs/new">Add New Campground</a>
                </p>
            </div>
            <div style="border-bottom: 1px solid #000; margin-bottom: 20px;">
            <% info.blogs.forEach(function(blog){ if(!blog.check){ %>
            <div class="row" style="margin-bottom: 20px;">
                <div class="col-md-6" style="padding-top: 20px;">
                    <img class="img-responsive" style="width: 100%; height: 267px;" src="<%= blog.image %>">
                </div>
                <div class="col-md-6" style="padding-top: 20px;">
                    <h4><a><%= blog.name %></a></h4>
                    <p style="margin-top: 10px; height: 136px; overflow: hidden;"><%= blog.description %></p>
                    <p>
                        <em>Submitted By <%= info.user.username %> at <%= blog.time %></em>
                    </p>
                    <div class="row">
                        <div class="col-md-2 col-3">
                            <a class="btn btn-xs btn-warning blog-btn" href="/blogs/<%= blog._id %>/edit">Edit</a>
                        </div>
                        <div class="col-md-2 col-3">
                            <form id="delete-form" action="/blogs/<%= blog._id %>?_method=DELETE" method="POST">
                                <button class="btn btn-xs btn-danger blog-btn">Delete</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <% }}); %>
            </div>
            <h3 class="col-md-9" style="padding-left:0px;">Checked Blogs</h3>
            <% info.blogs.forEach(function(blog){ if(blog.check){ %>
            <div class="row" style="margin-bottom: 20px;">
                <div class="col-md-6" style="padding-top: 20px;">
                    <img class="img-responsive" style="width: 100%; height: 267px;" src="<%= blog.image %>">
                </div>
                <div class="col-md-6" style="padding-top: 20px;">
                    <h4><a><%= blog.name %></a></h4>
                    <p style="margin-top: 10px; height: 136px; overflow: hidden;"><%= blog.description %></p>
                    <p>
                        <em>Submitted By <%= info.user.username %> at <%= blog.time %></em>
                    </p>
                    <div class="row">
                        <div class="col-md-2 col-3">
                            <a class="btn btn-xs btn-primary blog-btn" href="/blogs/<%= blog._id %>">Detail</a>
                        </div>
                        <div class="col-md-2 col-3">
                            <a class="btn btn-xs btn-warning blog-btn" href="/blogs/<%= blog._id %>/edit">Edit</a>
                        </div>
                        <div class="col-md-2 col-3">
                            <form id="delete-form" action="/blogs/<%= blog._id %>?_method=DELETE" method="POST">
                                <button class="btn btn-xs btn-danger blog-btn">Delete</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <% }}); %>
        </div>
        <div class="thumbnail" style="padding:30px;margin-bottom: 40px;overflow: scroll;">
            <h3 style="padding-left:30px;">Comments</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th style="text-align: center;">Comment</th>
                        <th style="text-align: center;">Time</th>
                        <th style="text-align: center;min-width: 195px;">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% info.blogs.forEach(function(blog){
                        blog.comments.forEach(function(comment){
                            info.comments.forEach(function(realComment){ 
                                if (realComment._id == comment.toString()){ %>
                                <tr>
                                    <td style="text-align: center;line-height: 35px;"><%= realComment.text %></td>
                                    <td style="text-align: center;line-height: 35px;"><%= realComment.time %></td>
                                    <td style="text-align: center;min-width: 195px;">
                                        <div class="row">
                                            <div class="col-md-6 col-6" style="text-align: right;">
                                                <a class="btn btn-xs btn-warning blog-btn" href="/blogs/<%=blog._id %>/comments/<%=realComment._id %>/edit">Edit</a>
                                            </div>
                                            <div class="col-md-6 col-6" style="text-align: left;">
                                                <form id="delete-form" action="/blogs/<%=blog._id %>/comments/<%=realComment._id %>?_method=DELETE" method="POST">
                                                    <button class="btn btn-xs btn-danger blog-btn">Delete</button>
                                                </form>
                                            </div>
                                        </div>
                                    </td>
                                </tr>   
                                <% }
                            })
                        })
                    }); %>
                </tbody>
            </table>
            
        </div>
    </div>
<% include ../partials/footer %>